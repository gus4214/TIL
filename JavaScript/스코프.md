# ìŠ¤ì½”í”„

## > ìŠ¤ì½”í”„ë€?

> ìŠ¤ì½”í”„ Scope : ë²”ìœ„, ì˜ì—­

**í”„ë¡œê·¸ë˜ë°ì—ì„œ ìŠ¤ì½”í”„ë€?**

- ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ”(ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”) ìœ íš¨í•œ ë²”ìœ„
- ì‹ë³„ì(ë³€ìˆ˜, í•¨ìˆ˜, í´ë˜ìŠ¤ ì´ë¦„)ê°€ ìœ íš¨í•œ ë²”ìœ„

ğŸ‘‰Â ì„ ì–¸ëœ ìœ„ì¹˜ì— ë”°ë¼ì„œ ìœ íš¨ ë²”ìœ„ê°€ ê²°ì •ëœë‹¤.

ê·¸ëŸ¼ ë²”ìœ„ëŠ” ì–´ë–»ê²Œ ê²°ì •í• ê¹Œ ?

```jsx
{
  ë¸”ëŸ­ ì•ˆì˜ ë³€ìˆ˜ëŠ” ë¸”ëŸ­ ì•ˆì—ì„œë§Œ ìœ íš¨
}
```

- ì™œ ì´ëŸ° ìŠ¤ì½”í”„ê°€ ì¡´ì¬í•˜ëŠ”ì§€? : ì‹ë³„ìë“¤ ì´ë¦„ ì¶©ëŒ ë°©ì§€, ë©”ëª¨ë¦¬ ì ˆì•½

ğŸ‘‰Â **ë³€ìˆ˜, ì‹ë³„ìëŠ” ìµœëŒ€í•œ í•„ìš”í•œ ê³³ì—ì„œ ì •ì˜ !!**

ì½”ë“œ ë¸”ëŸ­: _{ }, if() { }, for() { }, function() { }_

```jsx
{
  const a = "a";
}
console.log(a); // app crached
const b = "b";
```

- _ë¸”ëŸ­ ì™¸ë¶€ì—ì„œëŠ” ë¸”ëŸ­ ë‚´ë¶€ì˜ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•  ìˆ˜ ì—†ë‹¤._

```jsx
function print() {
  const message = "Hello World";
  console.log(message);
}
console.log(message);
```

- _í•¨ìˆ˜ ì™¸ë¶€ì—ì„œëŠ” í•¨ìˆ˜ ë‚´ë¶€ì˜ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•  ìˆ˜ ì—†ë‹¤._

```jsx
function sum(a, b) {
  console.log(a, b);
}
console.log(a, b);
```

- _í•¨ìˆ˜ ì™¸ë¶€ì—ì„œëŠ” í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ì°¸ì¡°í•  ìˆ˜ ì—†ë‹¤._

## > ìŠ¤ì½”í”„ ì˜ˆì œ

```jsx
{
  const x = 1;
  {
    const y = 2;
    console.log(x); // 1
  }
  console.log(x); // 1
  console.log(y); // yëŠ” ë¸”ëŸ­ ì•ˆì— ìˆê¸° ë•Œë¬¸ì— ì™¸ë¶€ì—ì„œ ì°¸ì¡°í•  ìˆ˜ ì—†ìŒ
}
```

```jsx
const text = "global"; // ì „ì—­ ë³€ìˆ˜, ì „ì—­ ìŠ¤ì½”í”„ (ê¸€ë¡œë²Œ ë³€ìˆ˜, ê¸€ë¡œë²Œ ìŠ¤ì½”í”„)
{
  const text = "inside block1"; // ì§€ì—­ ë³€ìˆ˜(ë¡œì»¬ë³€ìˆ˜), ì§€ì—­ ìŠ¤ì½”í”„(ë¡œì»¬ìŠ¤ì½”í”„) -> ë¸”ëŸ­ ë‚´ë¶€
  {
    const text = "inside block2";
    console.log(text); // 'inside block2'
  }
}
```

## > ê°€ë¹„ì§€ ì»¬ë ‰í„° (Garbage Collector)

ë©”ëª¨ë¦¬ë¥¼ ì²­ì†Œí•˜ì§€ ì•Šì•„ë„ ì¡°ê¸ˆ ë” í¸ì•ˆí•˜ê²Œ í”„ë¡œê·¸ë˜ë° í•  ìˆ˜ ìˆë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ **Garbage collection** (ì“°ë ˆê¸° ìˆ˜ì§‘)ì´ ë°œìƒí•˜ëŠ” ì›ë¦¬ëŠ”
ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì—ì„œ ìì²´ì ìœ¼ë¡œ ì œê³µí•´ì£¼ëŠ” **Garbage Collector**ê°€ ë°±ê·¸ë¼ìš´ë“œ ì—ì„œ ë™ì‘ì„ í•˜ëŠ”ë°

ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë©”ëª¨ë¦¬ë¥¼ ê°ì‹œí•˜ê³  í™•ì¸í•˜ë©´ì„œ ì•„ë¬´ë„ **ì°¸ì¡°í•˜ê³  ìˆì§€ ì•Šì€ ë©”ëª¨ë¦¬**ë¥¼ **ì²­ì†Œ**í•´ì¤€ë‹¤.

â†’ ë¶ˆí•„ìš”í•œ ë©”ëª¨ë¦¬ë¥¼ ë„ˆë¬´ ë§ì´ í• ë‹¹í•˜ì§€ ë§ê³  í•„ìš”í•œ ë§Œí¼ í•´ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤.

- **ê¸€ë¡œë²Œ ë³€ìˆ˜**ëŠ” ì•±ì´ ì¢…ë£Œë ë•Œê¹Œì§€ ê³„ì† ë©”ëª¨ë¦¬ì— ìœ ì§€ëœë‹¤.
  â†’ ê°€ê¸‰ì  ë³€ìˆ˜ëŠ” **í•„ìš”í•œ ê³³**ì—ì„œ ì“°ì

```jsx
const global = 1;
{
  // ë¸”ëŸ­ ë‚´ë¶€ì—ì„œë§Œ ì¡´ì¬í•˜ê³ , ë¸”ëŸ­ì´ ëë‚˜ë©´ ìë™ìœ¼ë¡œ ì†Œë©¸ëœë‹¤. (GC)
  const local = 1;
}
```

```jsx
function print() {
  // í•¨ìˆ˜ ë‚´ë¶€ì—ì„œë„ ë¸”ëŸ­ì•ˆì—ì„œ í•„ìš”í•œ ê²½ìš°ì—ëŠ”
  // í•„ìš”í•œ ê³³ì—ì„œ ë¸”ëŸ­ ì•ˆì—ì„œ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ê³  ì‚¬ìš©í•´ì•¼ í•œë‹¤!
  if (true) {
    let temp = 0;
  }
```

## > ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ (Execution Context)

**ì½”ë“œì˜ ì‹¤í–‰ ìˆœì„œì™€ ìŠ¤ì½”í”„ë¥¼ ê¸°ì–µí•œë‹¤!!**

```jsx
const a = 1; // ì „ì—­ ìŠ¤ì½”í”„
{
  const a = 2; // ë¸”ëŸ­ ìŠ¤ì½”í”„1
  {
    const a = 3; // ë¸”ëŸ­ ìŠ¤ì½”í”„2
  }
}
```

- **ê°ê°ì˜ ë¸”ë¡**ì€ **ë ‰ì‹œì»¬ í™˜ê²½**(Lexical Environtment)ë¼ëŠ” **ë‚´ë¶€ ì˜¤ë¸Œì íŠ¸**ë¥¼ ê°€ì§€ê³  ìˆë‹¤!
- ë ‰ì‹œì»¬ í™˜ê²½ ì•ˆì—ëŠ”
  - **í™˜ê²½ ë ˆì½”ë“œ**(í˜„ì¬ ë¸”ëŸ­ì— í•´ë‹¹í•˜ëŠ” ì •ë³´ë¥¼ ë‹´ê³ ìˆëŠ”)
  - **ì™¸ë¶€ í™˜ê²½ ì°¸ì¡°**(ë¶€ëª¨ëŠ” ëˆ„êµ°ì§€ ë¶€ëª¨ë¥¼ ì°¸ì¡°í•˜ê³  ìˆëŠ”)

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-12 á„‹á…©á„’á…® 5.28.31.png](image/scope.png)

- ë¸”ëŸ­2 ë ‰ì‹œì»¬ í™˜ê²½ì—ì„  aë¼ëŠ” ë³€ìˆ˜ê°€ ì—†ëŠ” ê²ƒì„ í™•ì¸
- ë°”ë¡œ ìƒìœ„ì— ìˆëŠ”(ìŠ¤ì½”í”„ ì²´ì¸) ë¶€ëª¨ê°€ ëˆ„êµ°ì§€ í™•ì¸
- ë¶€ëª¨ í™˜ê²½ ë ˆì½”ë“œ ì•ˆì— a = 2 ë¼ëŠ” ë³€ìˆ˜ê°€ ìˆëŠ”ì§€ ì—†ëŠ”ì§€ ê²€ì‚¬
- ë¶€ëª¨ì— aê°€ ìˆìœ¼ë‹ˆê¹ 2ë¥¼ ì¶œë ¥!

### ğŸ‘‰Â **ì´ëŸ¬í•œ ë ‰ì‹œì»¬ í™˜ê²½, ìŠ¤ì½”í”„ ì²´ì¸ì„ í†µí•´ì„œ ì–´ë–¤ ê²ƒì„ ë°°ìš¸ ìˆ˜ ìˆì„ê¹Œ ??**

**ë©”ëª¨ë¦¬ ì ˆì•½** ë¿ë§Œ ì•„ë‹ˆë¼, **ì„±ëŠ¥**ì„ ìœ„í•´ì„œë¼ë„ **ë³€ìˆ˜ëŠ” ìµœëŒ€í•œ í•„ìš”í•œ ê³³ì—ì„œ ì •ì˜**!!!

â†’ ì¤‘ì²©ëœ ìŠ¤ì½”í”„ë‚˜ ì—¬ëŸ¬ê°€ì§€ ì¤‘ì²©ëœ í•¨ìˆ˜ê°€ ìˆë‹¤ë©´ ìŠ¤ì½”í”„ ì²´ì¸ì„ í•˜ë©´ì„œ ê³„ì† ê²€ì‚¬ë¥¼ í•˜ë‹ˆ ì„±ëŠ¥ì—ë„ ì¢‹ì§€ê°€ ì•Šë‹¤.

**ğŸ˜ƒÂ ì •ë¦¬**

ìŠ¤ì½”í”„ ë°–ì—ì„œëŠ” ìŠ¤ì½”í”„ ë‚´ë¶€ì— ìˆëŠ” ê²ƒì— ëŒ€í•´ì„œ ì ‘ê·¼í•  ìˆ˜ ì—†ì§€ë§Œ, ìŠ¤ì½”í”„ ë‚´ë¶€ì—ì„  ì™¸ë¶€ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

â†’ ì´ê²ƒì´ ê°€ëŠ¥í•œ ì´ìœ ëŠ” ê°ê°ì˜ **ìŠ¤ì½”í”„**ëŠ” **ë ‰ì‹œì»¬ í™˜ê²½** ì•ˆì— **ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ ì°¸ì¡°**ë¡œ **ìŠ¤ì½”í”„ ì²´ì¸**ì„ í†µí•´ ë¶€ëª¨ì˜ ë°ì´í„°ì— ì ‘ê·¼í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ !! (ë‹¹ì—°íˆ í•¨ìˆ˜ë„ ë§ˆì°¬ê°€ì§€)

## > í˜¸ì´ìŠ¤íŒ…

**ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¬¸ë²•ì—ì„œ ë³€ìˆ˜ë‚˜ í•¨ìˆ˜ë¥¼ ì„ ì–¸ ì´ì „ì— ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.**

ğŸ’¡Â ì •ë§ ìœ„ë¡œ ëŒì–´ ì˜¬ë ¤ì§€ëŠ” ê²ƒì´ ì•„ë‹Œ ë³€ìˆ˜ë‚˜ í•¨ìˆ˜ë¥¼ ì„ ì–¸ ì´ì „ì— ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— **ëŒì–´ ì˜¬ë ¤ì§€ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ëŠ” ê²ƒì¼ ë¿!!**

**ê·¸ë ‡ë‹¤ë©´ ì–´ë–»ê²Œ ì„ ì–¸ ì´ì „ì— ì‚¬ìš©í•  ìˆ˜ ìˆì„ê¹Œ ?**

ğŸ‘‰Â ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ë  ë•Œ ë³€ìˆ˜ ê°ì²´ì— ë°°ì—´ ì‹ë³„ì ì •ë³´ë¥¼ ë‹´ëŠ” variable ë°°ì—´ì— ë³€ìˆ˜ë“¤ì„ ë¨¼ì € ë‹´ëŠ”ë‹¤.

ğŸ‘‰ ë¨¼ì € ë‹´ê¸° ë•Œë¬¸ì— ì„ ì–¸ì„ ë‚˜ì¤‘ì— í•´ë„ ì‚¬ìš©ì´ ê°€ëŠ¥í•œ ê²ƒ!!

**ê·¸ë ‡ë‹¤ë©´ varì™€ ë‹¬ë¦¬ const, letì€ ì–´ë–»ê²Œ í˜¸ì´ìŠ¤íŒ… ë˜ì§€ ì•Šê³  TDZì— ë“¤ì–´ê°€ëŠ” ê²ƒì¼ê¹Œ ?**

ğŸ‘‰ varëŠ” ì„ ì–¸ê³¼ ë™ì‹œì— AllocateTo ë©”ì†Œë“œë¥¼ í†µí•´ ë©”ëª¨ë¦¬ì— ë°”ë¡œ í• ë‹¹ì´ ëœë‹¤.

ğŸ‘‰ í•˜ì§€ë§Œ constë‚˜ let í‚¤ì›Œë“œëŠ” set_initializer_position ë©”ì†Œë“œë¥¼ í†µí•´ í•´ë‹¹ ì½”ë“œì˜ positionì„ ì •í•´ì£¼ì–´
ì´ˆê¸°í™” í•´ì£¼ëŠ” ê³¼ì •ì„ ê±°ì¹œë‹¤.

ğŸ¤”Â ì¦‰, varì™€ ë‹¬ë¦¬ ë©”ëª¨ë¦¬ í• ë‹¹ ì´ì „ì— ì¼ì¢…ì˜ ë°©ì–´ì½”ë“œê°€ ì¶”ê°€ë¨ìœ¼ë¡œì¨, ì„ ì–¸ì€ ë˜ì–´ ìˆì§€ë§Œ ë³€ìˆ˜ì— ê°’ì„ ë‹´ê¸° ìœ„í•œ ë©”ëª¨ë¦¬ì— ê³µê°„ì´ í™•ë³´ë˜ì§€ ì•Šì€ ìƒíƒœê°€ ë˜ëŠ” ê²ƒì´ë‹¤!

ğŸ¤”Â ì¦‰, constë‚˜ let ë˜í•œ ë™ì¼í•˜ê²Œ ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ë˜ëŠ” ì‹œì ì— variable ë°°ì—´ì— ë‹´ê²¨ í˜¸ì´ìŠ¤íŒ…ì´ ë˜ì§€ë§Œ
ì¼ì¢…ì˜ ì´ˆê¸°í™”(set_initializer_position)ë¡œ ì¸í•´ ì„ ì–¸ì´ë‚˜ í• ë‹¹ ì´ì „ì— ë¯¸ë¦¬ ì‚¬ìš©í•  ìˆ˜ ì—†ê²Œ ëœê²ƒ!

```jsx
// í•¨ìˆ˜ì˜ í˜¸ì´ìŠ¤íŒ…ì€ í•¨ìˆ˜ì˜ ì„ ì–¸ë¬¸ ì „ì— í˜¸ì¶œì´ ê°€ëŠ¥í•˜ê²Œ í•´ì¤Œ
// í•¨ìˆ˜ì˜ ì„ ì–¸ë¬¸ì€ ì„ ì–¸ ì´ì „ì—ë„ í˜¸ì¶œì´ ê°€ëŠ¥í•¨
print(); // Hello

function print() {
  console.log("Hello");
}
```

```jsx
console.log(hi); // Cannnot access 'hi' before initialization
let hi = "hi";
```

- initialization(ì´ˆê¸°í™”) í•˜ê¸° ì „ì—ëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.
- hiê°€ ì„ ì–¸ì€ ë˜ì—ˆì§€ë§Œ ì•„ì§ ì´ˆê¸°í™”ê°€ ë˜ì§€ ì•Šì•˜ë‹¤.

_ë³€ìˆ˜(let, const)ì™€ í´ë˜ìŠ¤ëŠ” ì„ ì–¸ë§Œ í˜¸ì´ìŠ¤íŒ…ì´ ë˜ê³ , ì´ˆê¸°í™”ëŠ” ì•ˆëœë‹¤._

_ì´ˆê¸°í™” ì „, ë³€ìˆ˜ì— ì ‘ê·¼í•˜ë©´ ì»´íŒŒì¼(ë¹Œë“œ) ì—ëŸ¬ê°€ ë°œìƒ_

ğŸ‘‰Â í•¨ìˆ˜ ì„ ì–¸ì€ ì™„ë²½í•˜ê²Œ í˜¸ì´ìŠ¤íŒ…ì´ ë˜ì§€ë§Œ ë³€ìˆ˜,í´ë˜ìŠ¤ëŠ” ì„ ì–¸ì „ì— ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.

```jsx
let x = 1;
{
  console.log(x); // 1
}
```

```jsx
let x = 1;
{
  console.log(x); // Cannnot access 'x' before initialization
  let x = 2;
}
```

- ë¸”ëŸ­ì•ˆì—ì„œ ë³€ìˆ˜ë¥¼ ì„ ì–¸í–ˆê¸° ë•Œë¬¸ì— ì„ ì–¸ëœ ë¶€ë¶„(let x)ë§Œ í˜¸ì´ìŠ¤íŒ…ì´ ë¼ì„œ ìœ„ë¡œ ì˜¬ë¼ì˜¤ê³ 
  xë¼ëŠ” ë³€ìˆ˜ëŠ” ë¸”ëŸ­ ë‚´ë¶€ì— ì¡´ì¬í•˜ëŠ”ë° ì•„ì§ ì´ˆê¸°í™”ê°€ ë˜ì§€ ì•Šì•„ì„œ ì—ëŸ¬ê°€ ë‚˜ì˜´

### var ë³€ìˆ˜ì˜ íŠ¹ì§•

ì½”ë“œì˜ ê°€ë…ì„±ê³¼ ìœ ì§€ë³´ìˆ˜ì„±ì— ì¢‹ì§€ ì•ŠìŒ

```jsx
// 1. ë³€ìˆ˜ ì„ ì–¸í•˜ëŠ” í‚¤ì›Œë“œ ì—†ì´ ì„ ì–¸ & í• ë‹¹ì´ ê°€ëŠ¥í•¨
// ì„ ì–¸ì¸ì§€, ì¬í• ë‹¹ì¸ì§€ êµ¬ë¶„í•˜ê¸° ì–´ë µë‹¤!!
something = "ğŸ’©";
console.log(something);

// 2. ì¤‘ë³µ ì„ ì–¸ì´ ê°€ëŠ¥í•¨ -> ì—¬ëŸ¬ëª…ì´ì„œ í˜‘ì—…í•˜ëŠ” ê²½ìš°ì— ì‹¤ìˆ˜ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
var poo = "ğŸ’©";
var poo = "ğŸ’©";
console.log(poo);

// 3. ë¸”ë¡ ë ˆë²¨ ìŠ¤ì½”í”„ ì•ˆë¨
var apple = "ì‚¬ê³¼";
{
  var apple = "ğŸ";
  {
    var apple = "ğŸ";
  }
}
console.log(apple); // ğŸ

// 4. í•¨ìˆ˜ ë ˆë²¨ ìŠ¤ì½”í”„ë§Œ ì§€ì› ë¨
function example() {
  var dog = "ğŸ¦®";
}
console.log(dog);
```

- var í‚¤ì›Œë“œ ì¨ì„œ ê°œë°œí•˜ë‹¤ë³´ë©´ ë©˜ë¶• ì˜¨ë‹¤!

## > strict mode (ì—„ê²© ëª¨ë“œ)

ë¦¬ì•¡íŠ¸ì™€ ê°™ì€ í”„ë ˆì„ì›Œí¬ ì‚¬ìš©ì‹œ ê¸°ë³¸ì ìœ¼ë¡œ ì—„ê²© ëª¨ë“œ

```jsx
"use strict";
var x = 1;
delete x; // ì—„ê²© ëª¨ë“œ ì“°ë©´ í‚¤ì›Œë“œ ì‚­ì œí•˜ëŠ” ê²ƒì´ ì•ˆë¨
```

```jsx
"use strict";
function add(x) {
  var a = 2;
  var b = a + x;
  console.log(this); // undefined
}
add(1);
```

```jsx
"use strict";
const array = [1, 2, 3];
for (const num of array) {
  console.log(num); // num is not defined
}
```

ğŸ’¡Â MDN ì°¸ê³  : [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode)
